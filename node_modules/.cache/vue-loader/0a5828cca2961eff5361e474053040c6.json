{"remainingRequest":"/Users/xurunjie/Documents/flutter/ws/shuyupingmin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xurunjie/Documents/flutter/ws/shuyupingmin/src/views/user/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xurunjie/Documents/flutter/ws/shuyupingmin/src/views/user/index.vue","mtime":1718009538092},{"path":"/Users/xurunjie/Documents/flutter/ws/shuyupingmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xurunjie/Documents/flutter/ws/shuyupingmin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/xurunjie/Documents/flutter/ws/shuyupingmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xurunjie/Documents/flutter/ws/shuyupingmin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFhMU1ggZnJvbSAneGxzeC94bHN4Lm1qcycKaW1wb3J0IGNvbW1vbkZvcm0gZnJvbSAiQC9jb21wb25lbnRzL0NvbW1vbkZvcm0iOwppbXBvcnQge3NhdmVBc30gZnJvbSAnZmlsZS1zYXZlcic7CmltcG9ydCBwYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uIjsKaW1wb3J0IEpzb25FeGNlbCBmcm9tICd2dWUtanNvbi1leGNlbCcKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBjb21tb25Gb3JtLAogICAgcGFnaW5hdGlvbiwKICAgIEpzb25FeGNlbAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGpzb25fZmllbGRzOiB7CiAgICAgICAgIuafpeivoui1t+Wni+aXpeacnyI6ICLmn6Xor6Lotbflp4vml6XmnJ8iLCAgICAvL+W4uOinhOWtl+autQogICAgICAgICLmn6Xor6Lnu5PmnZ/ml6XmnJ8iOiAi5p+l6K+i57uT5p2f5pel5pyfIiwgLy/mlK/mjIHltYzlpZflsZ7mgKcKICAgICAgICAi5YWs5Y+457yW56CBIjogIuWFrOWPuOe8lueggSIsICAgIC8v5bi46KeE5a2X5q61CiAgICAgICAgIuWFrOWPuOWQjeensCI6ICLlhazlj7jlkI3np7AiLCAgICAvL+W4uOinhOWtl+autQogICAgICAgICLpl6jlupflkI3np7AiOiAi6Zeo5bqX5ZCN56ewIiwgICAgLy/luLjop4TlrZfmrrUKICAgICAgICAi6LSn5Y+3IjogIui0p+WPtyIsICAgIC8v5bi46KeE5a2X5q61CiAgICAgICAgIuWTgeWQjSI6ICLlk4HlkI0iLCAgICAvL+W4uOinhOWtl+autQogICAgICAgICLop4TmoLwiOiAi6KeE5qC8IiwgICAgLy/luLjop4TlrZfmrrUKICAgICAgICAi55Sf5Lqn5Y2V5L2NIjogIueUn+S6p+WNleS9jSIsICAgIC8v5bi46KeE5a2X5q61CiAgICAgICAgIuaVsOmHjyI6ICLmlbDph48iLCAgICAvL+W4uOinhOWtl+autQogICAgICAgICLnlJ/kuqfmibnlj7ciOiAi55Sf5Lqn5om55Y+3IiwgICAgLy/luLjop4TlrZfmrrUKICAgICAgfSwKICAgICAgdGFiRGF0YTogW10sCiAgICAgIGFsbGRhdGE6IFtdLAogICAgICBkb3dubG9hZGRhdGE6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgZ2V0SW5mb0RhdGE6IHsKICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgb2Zmc2V0OiAxLAogICAgICAgIHN0YXJ0RGVsVGltZTogW10sCiAgICAgICAgc3RhcnRTdGFydFRpbWU6ICcnLAogICAgICAgIGVuZFN0YXJ0VGltZTogJycsCiAgICAgIH0sCiAgICAgIGZvcm1Db25maWc6IHsKICAgICAgICBmb3JtSXRlbUxpc3Q6IFsKCiAgICAgICAgICB7CiAgICAgICAgICAgIGxhYmVsOiAiIiwKICAgICAgICAgICAgdmFsdWU6ICJzdGFydERlbFRpbWUiLAogICAgICAgICAgICBjbGVhcmFibGU6IHRydWUsCiAgICAgICAgICAgIHN0YXJ0UGxhY2Vob2xkZXI6ICLlvIDlp4vml6XmnJ8iLAogICAgICAgICAgICBlbmRQbGFjZWhvbGRlcjogIue7k+adn+aXpeacnyIsCiAgICAgICAgICAgIHR5cGU6ICJkYXRlcmFuZ2UiLAogICAgICAgICAgICBkYXRlRm9ybWF0ZTogInl5eXktTU0tZGQiLAogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgb3BlcmF0ZTogWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAi5p+l6K+iIiwKICAgICAgICAgICAgdmFsdWU6ICJwcmltYXJ5IiwKICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGhhbmRsZUNsaWNrOiB0aGlzLmdpdExpc3QsCiAgICAgICAgICAgIGF1dGhCdG46IHRydWUsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5yZWFkV29ya2Jvb2tGcm9tUmVtb3RlRmlsZSgnaHR0cHM6Ly93d3dzd2tjb20uZ2l0aHViLmlvL3NodXl1cGluZ21pbi1kYXRhL+WVhuWTgemFjemAgeaYjue7hi54bHMnKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsZWFySW5wdXQoKSB7CiAgICAgIHRoaXMuZ2V0SW5mb0RhdGEgPSB7CiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIG9mZnNldDogMSwKICAgICAgICBzdGFydERlbFRpbWU6IFtdLAogICAgICAgIHN0YXJ0U3RhcnRUaW1lOiAnJywKICAgICAgICBlbmRTdGFydFRpbWU6ICcnLAogICAgICB9CiAgICB9LAogICAgcmVhZFdvcmtib29rRnJvbVJlbW90ZUZpbGU6IGZ1bmN0aW9uICh1cmwpIHsKCiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKQogICAgICB4aHIub3BlbignZ2V0JywgdXJsLCB0cnVlKQogICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJwogICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgIHhoci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHZhciBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoeGhyLnJlc3BvbnNlKQoKICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGRhdGEsIHsKICAgICAgICAgICAgdHlwZTogJ2FycmF5JwogICAgICAgICAgfSkKICAgICAgICAgIGNvbnN0IHdzbmFtZSA9IHdvcmtib29rLlNoZWV0TmFtZXNbMF0vLyDlj5bnrKzkuIDlvKDooagKICAgICAgICAgIHRoaXMuYWxsZGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3b3JrYm9vay5TaGVldHNbd3NuYW1lXSkvLyDnlJ/miJBqc29u6KGo5qC85YaF5a65CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFsbGRhdGEpOwogICAgICAgICAgLy8gZm9yKGxldCBpID0gMCA7aTx0aGlzLmFsbGRhdGEubGVuZ3RoO2krKyl7CiAgICAgICAgICAvLyAgIHRoaXMuYWxsZGF0YVtpXVsn5p+l6K+i6LW35aeL5pel5pyfJ10gPSB0aGlzLmZvcm1hdERhdGUodGhpcy5hbGxkYXRhW2ldWyfmn6Xor6Lotbflp4vml6XmnJ8nXSwnLScpOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gdGhpcy5kb3dubG9hZGRhdGEgPSB0aGlzLmFsbGRhdGE7CiAgICAgICAgICAvLyB0aGlzLnRhYkRhdGEgPSB0aGlzLmFsbGRhdGEuc2xpY2UoMCx0aGlzLmdldEluZm9EYXRhLmxpbWl0KQogICAgICAgICAgLy8gdGhpcy50b3RhbCA9IHRoaXMuYWxsZGF0YS5sZW5ndGgKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFiRGF0YS5sZW5ndGgpOwoKICAgICAgICB9CiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZXNbMF0pCiAgICAgIH0KICAgICAgeGhyLnNlbmQoKQogICAgfSwKICAgIGdpdExpc3QoKSB7CiAgICAgIGlmICh0aGlzLmdldEluZm9EYXRhLnN0YXJ0RGVsVGltZSAmJiB0aGlzLmdldEluZm9EYXRhLnN0YXJ0RGVsVGltZS5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5nZXRJbmZvRGF0YS5zdGFydFN0YXJ0VGltZSA9IHRoaXMuZ2V0SW5mb0RhdGEuc3RhcnREZWxUaW1lID8gdGhpcy5nZXRJbmZvRGF0YS5zdGFydERlbFRpbWVbMF0gOiAiIjsKICAgICAgICB0aGlzLmdldEluZm9EYXRhLmVuZFN0YXJ0VGltZSA9IHRoaXMuZ2V0SW5mb0RhdGEuc3RhcnREZWxUaW1lID8gdGhpcy5nZXRJbmZvRGF0YS5zdGFydERlbFRpbWVbMV0gOiAiIjsKICAgICAgICBsZXQgc2VhcmNoTGlzdCA9IFtdOwogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFsbGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLmdldEluZm9EYXRhLnN0YXJ0U3RhcnRUaW1lIDw9IHRoaXMuYWxsZGF0YVtpXVsn5p+l6K+i6LW35aeL5pel5pyfJ10gJiYgdGhpcy5hbGxkYXRhW2ldWyfmn6Xor6Lotbflp4vml6XmnJ8nXSA8IHRoaXMuZ2V0SW5mb0RhdGEuZW5kU3RhcnRUaW1lKSB7CiAgICAgICAgICAgIHNlYXJjaExpc3QucHVzaCh0aGlzLmFsbGRhdGFbaV0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuZG93bmxvYWRkYXRhID0gc2VhcmNoTGlzdDsKICAgICAgICB0aGlzLnRvdGFsID0gc2VhcmNoTGlzdC5sZW5ndGgKICAgICAgICB0aGlzLnRhYkRhdGEgPSBzZWFyY2hMaXN0LnNsaWNlKCh0aGlzLmdldEluZm9EYXRhLm9mZnNldCAtIDEpICogdGhpcy5nZXRJbmZvRGF0YS5saW1pdCwgdGhpcy5nZXRJbmZvRGF0YS5vZmZzZXQgKiB0aGlzLmdldEluZm9EYXRhLmxpbWl0KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG93bmxvYWRkYXRhID0gW107CiAgICAgICAgdGhpcy50b3RhbCA9IDAKICAgICAgICB0aGlzLnRhYkRhdGEgPSBbXQogICAgICB9CiAgICAgIC8vCgogICAgfSwKICAgIGZvcm1hdERhdGUobnVtYiwgZm9ybWF0KSB7CiAgICAgIGNvbnN0IG9sZCA9IG51bWIgLSAxOwogICAgICBjb25zdCB0ID0gTWF0aC5yb3VuZCgob2xkIC0gTWF0aC5mbG9vcihvbGQpKSAqIDI0ICogNjAgKiA2MCk7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSgxOTAwLCAwLCBvbGQsIDAsIDAsIHQpCiAgICAgIGNvbnN0IHllYXIgPSB0aW1lLmdldEZ1bGxZZWFyKCk7CiAgICAgIGNvbnN0IG1vbnRoID0gdGltZS5nZXRNb250aCgpICsgMTsKICAgICAgY29uc3QgZGF0ZSA9IHRpbWUuZ2V0RGF0ZSgpOwogICAgICByZXR1cm4geWVhciArIGZvcm1hdCArIChtb250aCA8IDEwID8gJzAnICsgbW9udGggOiBtb250aCkgKyBmb3JtYXQgKyAoZGF0ZSA8IDEwID8gJzAnICsgZGF0ZSA6IGRhdGUpCiAgICB9LAogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <commonForm :inline=\"true\" :data=\"getInfoData\" :formConfig=\"formConfig\">\n    </commonForm>\n    <JsonExcel\n        v-if=\"total > 0\"\n        class=\"export-excel-wrapper\"\n        :data=\"downloaddata\"\n        :fields=\"json_fields\"\n        name=\"商品配送明细.xls\">\n      <!-- 上面可以自定义自己的样式，还可以引用其他组件button -->\n      <el-button type=\"primary\" size=\"small\" style=\"color: white;background: green\">导出</el-button>\n    </JsonExcel>\n    <!-- <el-upload action=\"\" :auto-upload=\"false\" :on-change=\"upload\" :limit=\"1\">\n      <el-button size=\"mini\" type=\"success\">上传文件</el-button>\n    </el-upload> -->\n    <el-table\n        :data=\"tabData\"\n        element-loading-text=\"Loading\"\n        border\n        fit\n        highlight-current-row\n        class=\"forms\"\n\n    >\n      <el-table-column\n          prop=\"查询起始日期\"\n          label=\"查询起始日期\"\n      ></el-table-column>\n      <el-table-column\n          prop=\"查询结束日期\"\n          label=\"查询结束日期\"\n      ></el-table-column>\n      <el-table-column\n          prop=\"公司编码\"\n          width=\"90\"\n          label=\"公司编码\"\n      ></el-table-column>\n      <el-table-column\n          min-width=\"130\"\n          prop=\"公司名称\"\n          label=\"公司名称\"\n      >\n      </el-table-column>\n      <el-table-column\n          prop=\"门店名称\"\n          min-width=\"230\"\n          label=\"门店名称\"\n      ></el-table-column>\n      <el-table-column prop=\"货号\" label=\"货号\"></el-table-column>\n      <el-table-column label=\"品名\" prop=\"品名\"></el-table-column>\n      <el-table-column label=\"规格\"  prop=\"规格\">\n      </el-table-column>\n      <el-table-column label=\"生产单位\" min-width=\"100\" prop=\"生产单位\">\n      </el-table-column>\n      <el-table-column label=\"数量\"  prop=\"数量\">\n\n      </el-table-column>\n      <el-table-column label=\"生产批号\" prop=\"生产批号\"></el-table-column>\n\n    </el-table>\n    <!--分页器-->\n    <pagination\n        v-show=\"total > 0\"\n        :total=\"total\"\n        :page.sync=\"getInfoData.offset\"\n        :limit.sync=\"getInfoData.limit\"\n        @pagination=\"gitList\"\n    />\n  </div>\n</template>\n\n<script>\nimport * as XLSX from 'xlsx/xlsx.mjs'\nimport commonForm from \"@/components/CommonForm\";\nimport {saveAs} from 'file-saver';\nimport pagination from \"@/components/Pagination\";\nimport JsonExcel from 'vue-json-excel'\n\nexport default {\n  components: {\n    commonForm,\n    pagination,\n    JsonExcel\n  },\n  data() {\n    return {\n      json_fields: {\n        \"查询起始日期\": \"查询起始日期\",    //常规字段\n        \"查询结束日期\": \"查询结束日期\", //支持嵌套属性\n        \"公司编码\": \"公司编码\",    //常规字段\n        \"公司名称\": \"公司名称\",    //常规字段\n        \"门店名称\": \"门店名称\",    //常规字段\n        \"货号\": \"货号\",    //常规字段\n        \"品名\": \"品名\",    //常规字段\n        \"规格\": \"规格\",    //常规字段\n        \"生产单位\": \"生产单位\",    //常规字段\n        \"数量\": \"数量\",    //常规字段\n        \"生产批号\": \"生产批号\",    //常规字段\n      },\n      tabData: [],\n      alldata: [],\n      downloaddata: [],\n      total: 0,\n      getInfoData: {\n        limit: 10,\n        offset: 1,\n        startDelTime: [],\n        startStartTime: '',\n        endStartTime: '',\n      },\n      formConfig: {\n        formItemList: [\n\n          {\n            label: \"\",\n            value: \"startDelTime\",\n            clearable: true,\n            startPlaceholder: \"开始日期\",\n            endPlaceholder: \"结束日期\",\n            type: \"daterange\",\n            dateFormate: \"yyyy-MM-dd\",\n          }\n        ],\n        operate: [\n          {\n            name: \"查询\",\n            value: \"primary\",\n            type: \"button\",\n            handleClick: this.gitList,\n            authBtn: true,\n          },\n        ],\n      },\n    }\n  },\n  mounted() {\n    this.readWorkbookFromRemoteFile('https://wwwswkcom.github.io/shuyupingmin-data/商品配送明细.xls');\n  },\n  methods: {\n    clearInput() {\n      this.getInfoData = {\n        limit: 10,\n        offset: 1,\n        startDelTime: [],\n        startStartTime: '',\n        endStartTime: '',\n      }\n    },\n    readWorkbookFromRemoteFile: function (url) {\n\n      var xhr = new XMLHttpRequest()\n      xhr.open('get', url, true)\n      xhr.responseType = 'arraybuffer'\n      let _this = this\n      xhr.onload = (e) => {\n        if (xhr.status === 200) {\n          var data = new Uint8Array(xhr.response)\n\n          const workbook = XLSX.read(data, {\n            type: 'array'\n          })\n          const wsname = workbook.SheetNames[0]// 取第一张表\n          this.alldata = XLSX.utils.sheet_to_json(workbook.Sheets[wsname])// 生成json表格内容\n          console.log(this.alldata);\n          // for(let i = 0 ;i<this.alldata.length;i++){\n          //   this.alldata[i]['查询起始日期'] = this.formatDate(this.alldata[i]['查询起始日期'],'-');\n          // }\n          // this.downloaddata = this.alldata;\n          // this.tabData = this.alldata.slice(0,this.getInfoData.limit)\n          // this.total = this.alldata.length\n          console.log(this.tabData.length);\n\n        }\n        fileReader.readAsBinaryString(files[0])\n      }\n      xhr.send()\n    },\n    gitList() {\n      if (this.getInfoData.startDelTime && this.getInfoData.startDelTime.length > 0) {\n        this.getInfoData.startStartTime = this.getInfoData.startDelTime ? this.getInfoData.startDelTime[0] : \"\";\n        this.getInfoData.endStartTime = this.getInfoData.startDelTime ? this.getInfoData.startDelTime[1] : \"\";\n        let searchList = [];\n        // debugger\n        for (let i = 0; i < this.alldata.length; i++) {\n          if (this.getInfoData.startStartTime <= this.alldata[i]['查询起始日期'] && this.alldata[i]['查询起始日期'] < this.getInfoData.endStartTime) {\n            searchList.push(this.alldata[i])\n          }\n        }\n        this.downloaddata = searchList;\n        this.total = searchList.length\n        this.tabData = searchList.slice((this.getInfoData.offset - 1) * this.getInfoData.limit, this.getInfoData.offset * this.getInfoData.limit)\n      } else {\n        this.downloaddata = [];\n        this.total = 0\n        this.tabData = []\n      }\n      //\n\n    },\n    formatDate(numb, format) {\n      const old = numb - 1;\n      const t = Math.round((old - Math.floor(old)) * 24 * 60 * 60);\n      const time = new Date(1900, 0, old, 0, 0, t)\n      const year = time.getFullYear();\n      const month = time.getMonth() + 1;\n      const date = time.getDate();\n      return year + format + (month < 10 ? '0' + month : month) + format + (date < 10 ? '0' + date : date)\n    },\n  }\n}\n</script>\n<style scoped>\n.export-excel-wrapper {\n  margin-bottom: 10px;\n}\n</style>\n"]}]}